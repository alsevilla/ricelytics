{% extends 'main.html' %}
{% load static %}
{% block content %}
<!-- Header --->
<div class="jumbotron text-center">
    <div class="jumbotron-content">
        <h2>State of the Rice Sector in the Philippines</h2>
        <h1>Gross Value Added</h1>
        <p class="lead">Gross value added generated by the agriculture and rice sector, 2000-2020</p>
    </div>
</div>


<!-- Body -->
<div class="sublevel container">
    <div class="row">
        <div class="col">
            <div class="card-deck mb-2 text-center">
                <div class="card primary mb-4 bg-alternate">
                    <div class="card-body">
                        <div class="row">
                            <div class="col">
                                <h5 class="card-title">Agriculture, Forestry, and Fishing GVA (2020)</h5>
                                <p class="card-title-note">(At Constant 2018 Prices)</p>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-6 border-right">
                                <h1 class="card-text font-weight-bold" style="margin-left: -10px;">1.78<i class="bi bi-caret-up-fill"></i></h1>
                                <div class="card-note w-100 mx-auto rounded-pill bg-primary">
                                    <p class="text-white">trillion pesos</p>
                                </div>
                            </div>
                            <div class="col-6">
                                <h2 class="card-text align-middle mt-2 font-weight-bold">21%<i class="bi bi-caret-up-fill"></i></h2>
                                <div class="card-note w-100 mx-auto rounded-pill bg-primary">
                                    <p class="text-white">rice sector's share</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card primary mb-4 bg-primary text-white">
                    <div class="card-body">
                        <h5 class="card-title">Rice Production Gross Value Added (2020)</h5>
                        <p class="card-title-note">(At Constant 2018 Prices)</p>
                        <h1 class="card-text font-weight-bold mt-3">369.21<i class="bi bi-caret-up-fill"></i></h1>
                        <div class="card-note w-50 mx-auto rounded-pill">
                            <p class="text-dark">billion pesos</p>
                        </div>
                    </div>
                </div>
                <div class="card primary mb-4 bg-alternate">
                    <div class="card-body">
                        <div class="row">
                            <div class="col">
                                <h5 class="card-title">Gross Domestic Product (2020)</h5>
                                <p class="card-title-note">(At Constant 2018 Prices)</p>
                            </div>
                        </div>
                        <div class="row mt-4">
                            <div class="col-6 border-right">
                                <h1 class="card-text font-weight-bold" style="margin-left: -10px;">17.5<i class="bi bi-caret-up-fill"></i></h1>
                                <div class="card-note w-100 mx-auto rounded-pill bg-primary">
                                    <p class="text-white">trillion pesos</p>
                                </div>
                            </div>
                            <div class="col-6">
                                <h2 class="card-text align-middle mt-2 font-weight-bold">2.1%<i class="bi bi-caret-up-fill"></i></h2>
                                <div class="card-note w-100 mx-auto rounded-pill bg-primary">
                                    <p class="text-white">rice sector's share</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div class="card mb-4">
                <div class="card-header text-center">
                    <h5 class="my-0 p-2">Rice production and agriculture sector GVA (2000-2020)</h5>
                    <p class="my-0 font-weight-normal text-muted">In Million Pesos, Constant 2018 Prices (PSA, 2021)</p>
                </div>
                <div class="card-body mt-4">
                    <div><canvas id="ctxAgriSector"></canvas></div>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card mb-4">
                <div class="card-header text-center">
                    <h5 class="my-0 p-2">Share of rice production to agriculture GDP and total GDP (2000-2020)</h5>
                    <p class="my-0 font-weight-normal text-muted">Percentage (%), Constant 2018 Prices (PSA, 2021)</p>
                </div>
                <div class="card-body">
                    <div><canvas id="ctxAgriShare"></canvas></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer --->
    <footer class="pt-4 my-md-5 pt-md-5 border-top">
        <div class="row">
            <div class="col-12 col-md">
                <small class="d-block mb-3 text-muted">2021. RiceLytics Data Initative.</small>
                <small class="text-muted">Philippine Rice Research Institute.</small>
            </div>
            <div class="col-6 col-md">
                <h5>State of the Rice Sector</h5>
                <ul class="list-unstyled text-small">
                    <li><a class="text-muted" href="#">Rice Production</a></li>
                    <li><a class="text-muted" href="#">Area Harvested</a></li>
                    <li><a class="text-muted" href="#">Yield per Hectare</a></li>
                    <li><a class="text-muted" href="#">Supply and Utilization</a></li>
                    <li><a class="text-muted" href="#">Gross Value Added</a></li>
                    <li><a class="text-muted" href="#">Farmerâ€™s Income</a></li>
                    <li><a class="text-muted" href="#">Palay & Rice Prices</a></li>
                </ul>
            </div>
            <div class="col-6 col-md">
                <h5>Rice Farmer Characteristics</h5>
                <ul class="list-unstyled text-small">
                    <li><a class="text-muted" href="#">Sociodemographics</a></li>
                    <li><a class="text-muted" href="#">Farm Details</a></li>
                    <li><a class="text-muted" href="#">Technology Awareness</a></li>
                </ul>
            </div>
            <div class="col-6 col-md">
                <h5>RCEF Updates</h5>
                <ul class="list-unstyled text-small">
                    <li><a class="text-muted" href="#">Inbred Seeds</a></li>
                    <li><a class="text-muted" href="#">Machineries</a></li>
                    <li><a class="text-muted" href="#">Extension</a></li>
                    <li><a class="text-muted" href="#">Credit</a></li>
                </ul>
            </div>
        </div>
    </footer>
</div>
{% endblock content %}
{% block script %}
<script>
    Chart.defaults.global.responsive = true;
    Chart.defaults.global.tooltips.mode = 'index';
    Chart.defaults.global.tooltips.intersect = false;
    Chart.defaults.global.defaultFontFamily = 'Poppins';
    Chart.defaults.global.defaultFontSize = 13;
    Chart.defaults.global.animation.duration = 3000;

    // CHART 1

    var dbPalay = JSON.parse('[{"location_name":"Philippines","year":"2000","value":"284379.00"},{"location_name":"Philippines","year":"2001","value":"292826.00"},{"location_name":"Philippines","year":"2002","value":"296891.00"},{"location_name":"Philippines","year":"2003","value":"299152.00"},{"location_name":"Philippines","year":"2004","value":"320188.00"},{"location_name":"Philippines","year":"2005","value":"323712.00"},{"location_name":"Philippines","year":"2006","value":"332168.00"},{"location_name":"Philippines","year":"2007","value":"339702.00"},{"location_name":"Philippines","year":"2008","value":"342710.00"},{"location_name":"Philippines","year":"2009","value":"338480.00"},{"location_name":"Philippines","year":"2010","value":"329425.00"},{"location_name":"Philippines","year":"2011","value":"348097.00"},{"location_name":"Philippines","year":"2012","value":"373962.00"},{"location_name":"Philippines","year":"2013","value":"382785.00"},{"location_name":"Philippines","year":"2014","value":"389264.00"},{"location_name":"Philippines","year":"2015","value":"370914.00"},{"location_name":"Philippines","year":"2016","value":"358273.00"},{"location_name":"Philippines","year":"2017","value":"385740.00"},{"location_name":"Philippines","year":"2018","value":"380311.00"},{"location_name":"Philippines","year":"2019","value":"357982.00"},{"location_name":"Philippines","year":"2020","value":"369205.00"}]');
    var dbAgri = JSON.parse('[{"location_name":"Philippines","year":"2000","value":"1064005.00"},{"location_name":"Philippines","year":"2001","value":"1105117.00"},{"location_name":"Philippines","year":"2002","value":"1144991.00"},{"location_name":"Philippines","year":"2003","value":"1197371.00"},{"location_name":"Philippines","year":"2004","value":"1257109.00"},{"location_name":"Philippines","year":"2005","value":"1301069.00"},{"location_name":"Philippines","year":"2006","value":"1360678.00"},{"location_name":"Philippines","year":"2007","value":"1433747.00"},{"location_name":"Philippines","year":"2008","value":"1482352.00"},{"location_name":"Philippines","year":"2009","value":"1480207.00"},{"location_name":"Philippines","year":"2010","value":"1499801.00"},{"location_name":"Philippines","year":"2011","value":"1550555.00"},{"location_name":"Philippines","year":"2012","value":"1598312.00"},{"location_name":"Philippines","year":"2013","value":"1645192.00"},{"location_name":"Philippines","year":"2014","value":"1676006.00"},{"location_name":"Philippines","year":"2015","value":"1688344.00"},{"location_name":"Philippines","year":"2016","value":"1672085.00"},{"location_name":"Philippines","year":"2017","value":"1743134.00"},{"location_name":"Philippines","year":"2018","value":"1762616.00"},{"location_name":"Philippines","year":"2019","value":"1783855.00"},{"location_name":"Philippines","year":"2020","value":"1780544.00"}]');

    let years = [];
    let values_palay = [];
    let values_agri = [];

    try {
        dbPalay.map((item) => {
            years.push(item.year);
            values_palay.push(item.value);
        });
        dbAgri.map((item) => {
            values_agri.push(item.value);
        });
    } catch (error) {
        console.log(error);
    }

    var agriSector = document.getElementById('ctxAgriSector').getContext('2d');
    var tempAgriLabels = [...years];
    var agriSecData = [...values_agri];
    var riceSecData = [...values_palay];
    var agriSectorChart = new Chart(agriSector, {
        // The type of chart we want to create
        type: 'line',

        // The data for our dataset
        data: {
            labels: tempAgriLabels,
            datasets: [{
                    label: 'Rice production',
                    backgroundColor: '#2138B7', // COLOR 1
                    borderColor: '#2138B7', // COLOR 1
                    lineTension: 0,
                    data: riceSecData
                },
                {
                    label: 'Agriculture sector',
                    backgroundColor: '#007FFE', // COLOR 2
                    borderColor: '#007FFE', // COLOR 2
                    lineTension: 0,
                    data: agriSecData
                },
            ]
        },

        // Configuration options go here
        options: {
            aspectRatio: 1.6,
            elements: {
                point: {
                    radius: 2
                }
            },
            scales: {
                xAxes: [{
                    display: true,
                    gridLines: {
                        color: "rgba(0, 0, 0, 0)"
                    }
                }],
                yAxes: [{
                    display: true,
                    ticks: {
                        suggestedMin: 0,
                    }
                }]
            },
            legend: {
                position: 'bottom'
            }
        }
    });

    // CHART 2

    var dbAgriSh = JSON.parse('[{"location_name":"Philippines","year":"2000","value":"26.73"},{"location_name":"Philippines","year":"2001","value":"26.50"},{"location_name":"Philippines","year":"2002","value":"25.93"},{"location_name":"Philippines","year":"2003","value":"24.98"},{"location_name":"Philippines","year":"2004","value":"25.47"},{"location_name":"Philippines","year":"2005","value":"24.88"},{"location_name":"Philippines","year":"2006","value":"24.41"},{"location_name":"Philippines","year":"2007","value":"23.69"},{"location_name":"Philippines","year":"2008","value":"23.12"},{"location_name":"Philippines","year":"2009","value":"22.87"},{"location_name":"Philippines","year":"2010","value":"21.96"},{"location_name":"Philippines","year":"2011","value":"22.45"},{"location_name":"Philippines","year":"2012","value":"23.40"},{"location_name":"Philippines","year":"2013","value":"23.27"},{"location_name":"Philippines","year":"2014","value":"23.23"},{"location_name":"Philippines","year":"2015","value":"21.97"},{"location_name":"Philippines","year":"2016","value":"21.43"},{"location_name":"Philippines","year":"2017","value":"22.13"},{"location_name":"Philippines","year":"2018","value":"21.58"},{"location_name":"Philippines","year":"2019","value":"20.07"},{"location_name":"Philippines","year":"2020","value":"20.74"}]');
    var dbTotalSh = JSON.parse('[{"location_name":"Philippines","year":"2000","value":"4.07"},{"location_name":"Philippines","year":"2001","value":"4.07"},{"location_name":"Philippines","year":"2002","value":"3.98"},{"location_name":"Philippines","year":"2003","value":"3.81"},{"location_name":"Philippines","year":"2004","value":"3.83"},{"location_name":"Philippines","year":"2005","value":"3.69"},{"location_name":"Philippines","year":"2006","value":"3.59"},{"location_name":"Philippines","year":"2007","value":"3.45"},{"location_name":"Philippines","year":"2008","value":"3.34"},{"location_name":"Philippines","year":"2009","value":"3.25"},{"location_name":"Philippines","year":"2010","value":"2.95"},{"location_name":"Philippines","year":"2011","value":"3.00"},{"location_name":"Philippines","year":"2012","value":"3.01"},{"location_name":"Philippines","year":"2013","value":"2.89"},{"location_name":"Philippines","year":"2014","value":"2.76"},{"location_name":"Philippines","year":"2015","value":"2.47"},{"location_name":"Philippines","year":"2016","value":"2.23"},{"location_name":"Philippines","year":"2017","value":"2.25"},{"location_name":"Philippines","year":"2018","value":"2.08"},{"location_name":"Philippines","year":"2019","value":"1.85"},{"location_name":"Philippines","year":"2020","value":"2.11"}]');

    let shares_years = [];
    let shares_agri = [];
    let shares_total = [];

    try {
        dbAgriSh.map((item) => {
            shares_years.push(item.year);
            shares_agri.push(item.value);
        });
        dbTotalSh.map((item) => {
            shares_total.push(item.value);
        });
    } catch (error) {
        console.log(error);
    }

    var agriShare = document.getElementById('ctxAgriShare').getContext('2d');
    var tempShareLabels = [...shares_years];
    var agriShareData = [...shares_agri];
    var totalShareData = [...shares_total];
    var agriShareChart = new Chart(agriShare, {
        // The type of chart we want to create
        type: 'line',

        // The data for our dataset
        data: {
            labels: tempShareLabels,
            datasets: [{
                label: 'Total GDP share',
                backgroundColor: '#2138B7', // COLOR 1
                borderColor: '#2138B7', // COLOR 1
                lineTension: 0,
                data: totalShareData
            }, {
                label: 'Agriculture GDP share',
                backgroundColor: '#007FFE', // COLOR 2
                borderColor: '#007FFE', // COLOR 2
                lineTension: 0,
                data: agriShareData
            }]
        },

        // Configuration options go here
        options: {
            aspectRatio: 1.6,
            elements: {
                point: {
                    radius: 2
                }
            },
            scales: {
                xAxes: [{
                    display: true,
                    gridLines: {
                        color: "rgba(0, 0, 0, 0)"
                    }
                }],
                yAxes: [{
                    display: true,
                    ticks: {
                        suggestedMin: 0,
                        suggestedMax: 100
                    }
                }]
            },
            legend: {
                position: 'bottom'
            }
        }
    });

</script>
{% endblock script %}
